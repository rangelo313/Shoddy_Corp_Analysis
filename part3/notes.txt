

gcc -g --coverage giftcardreaderfix.c -o giftcardreaderfix

#2 cov files- 2 AFL files




./giftcardreaderfix 1 hang.gft && ./giftcardreaderfix 2 hang.gft && ./giftcardreaderfix 1 crash1.gft && ./giftcardreaderfix 2 crash1.gft && ./giftcardreaderfix 1 crash2.gft && ./giftcardreaderfix 2 crash2.gft
File 'giftcardreaderfix.c'
Lines executed:54.39% of 171
Creating 'giftcardreaderfix.c.gcov'





./giftcardreaderfix 1 cov1.gft #change record type or change variable to Increase coverage
./giftcardreaderfix 2 cov1.gft 
./giftcardreaderfix 1 cov2.gft #change type of record
./giftcardreaderfix 2 cov2.gft
./giftcardreader 1 AFL1.gft
./giftcardreader 2 AFL1.gft
./giftcardreader 1 AFL1.gf
./giftcardreader 2 AFL2.gft

File 'giftcardreaderfix.c'
Lines executed:54.97% of 171
Creating 'giftcardreaderfix.c.gcov'

Percentage increase = 54.97-54.39






./giftcardreaderfix 1 hang.gft && ./giftcardreaderfix 2 hang.gft && ./giftcardreaderfix 1 crash1.gft && ./giftcardreaderfix 2 crash1.gft && ./giftcardreaderfix 1 crash2.gft && ./giftcardreaderfix 2 crash2.gft  && ./giftcardreaderfix 1 fuzz/fuzz1.gft && ./giftcardreaderfix 2 fuzz/fuzz1.gft && ./giftcardreaderfix 1 fuzz/fuzz2.gft && ./giftcardreaderfix 2 fuzz/fuzz2.gft  && ./giftcardreaderfix 1 fuzz/cov1.gft && ./giftcardreaderfix 2 fuzz/cov1.gft && ./giftcardreaderfix 1 fuzz/cov2.gft && ./giftcardreaderfix 2 fuzz/cov2.gft 


rm  giftcardreaderfix.gcda giftcardreaderfix.gcno #if attempting to show increased coverage will get error.



gcov giftcardreader #reads gcda file to produce 

LCOV:

lcov -c -d . -o gitcardreader.info 
genhtml giftcardreader.info -o giftcardreader_report
cd

AFL Fuzzer - 
afl-clang giftcardreader.c -o giftcardreader               #take a file that AFL produces, rename AFL1.gft, use that as an argument
afl-fuzz -i inputs -o outputs -- ./giftcardreader 1 @@ 



AFL_HARDEN=1 afl-gcc giftcardreaderfix.c -o giftcardreaderfix 
afl-gcc foo.c -o foo
afl-fuzz -i inptest -o output -- ./giftcardreaderfix 1 @@

afl-fuzz -i input/ -o output/ ./giftcardReaderAFL  1 @@